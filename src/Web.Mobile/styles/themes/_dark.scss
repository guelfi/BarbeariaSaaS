// ==========================================================================
// Dark Theme - Web Mobile (PWA)
// ==========================================================================

[data-theme="dark"] {
  // Override mobile colors for dark theme
  --mobile-primary: #{lighten($primary-color, 15%)};
  --mobile-primary-light: #{lighten($primary-color, 25%)};
  --mobile-primary-dark: #{$primary-color};
  
  // Dark background colors
  --mobile-bg-primary: #121212;
  --mobile-bg-secondary: #1E1E1E;
  --mobile-bg-tertiary: #2D2D2D;
  --mobile-bg-overlay: rgba(0, 0, 0, 0.8);
  
  // Dark text colors
  --mobile-text-primary: #FFFFFF;
  --mobile-text-secondary: #B3B3B3;
  --mobile-text-tertiary: #808080;
  --mobile-text-inverse: #121212;
  
  // Dark component colors
  --mobile-card-bg: #1E1E1E;
  --mobile-card-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  --mobile-input-bg: #2D2D2D;
  --mobile-input-border: #404040;
  
  // PWA dark colors
  --pwa-header-bg: #1E1E1E;
  --pwa-header-text: #FFFFFF;
  --pwa-nav-bg: #1E1E1E;
  --pwa-nav-border: #404040;
  --pwa-nav-text: #B3B3B3;
  --pwa-nav-active: var(--mobile-primary);
  
  // Status bar for dark theme
  --status-bar-style: light-content;
  --theme-color: #1E1E1E;
  
  // Apply dark theme styles
  background-color: var(--mobile-bg-primary);
  color: var(--mobile-text-primary);
  
  // PWA header dark
  .pwa-header {
    background-color: var(--pwa-header-bg);
    color: var(--pwa-header-text);
    border-bottom: 1px solid var(--mobile-input-border);
  }
  
  // PWA bottom navigation dark
  .pwa-bottom-nav {
    background-color: var(--pwa-nav-bg);
    border-top: 1px solid var(--pwa-nav-border);
    color: var(--pwa-nav-text);
    
    .nav-item.active {
      color: var(--pwa-nav-active);
    }
  }
  
  // Mobile login page dark
  .mobile-login-container {
    background: linear-gradient(135deg, #{darken($primary-color, 30%)} 0%, #{darken($secondary-color, 30%)} 100%);
  }
  
  .mobile-login-card {
    background-color: var(--mobile-card-bg);
    box-shadow: var(--mobile-card-shadow);
    border: 1px solid var(--mobile-input-border);
  }
  
  // Mobile form elements dark
  .mobile-input {
    background-color: var(--mobile-input-bg);
    border-color: var(--mobile-input-border);
    color: var(--mobile-text-primary);
    
    &:focus {
      border-color: var(--mobile-primary);
      box-shadow: 0 0 0 3px rgba(var(--mobile-primary), 0.2);
    }
    
    &::placeholder {
      color: var(--mobile-text-tertiary);
    }
  }
  
  // Mobile buttons dark
  .mobile-btn-primary {
    background-color: var(--mobile-primary);
    color: var(--mobile-text-inverse);
    
    &:hover, &:active {
      background-color: var(--mobile-primary-dark);
    }
  }
  
  .mobile-btn-secondary {
    background-color: transparent;
    color: var(--mobile-primary);
    border: 2px solid var(--mobile-primary);
    
    &:hover, &:active {
      background-color: var(--mobile-primary);
      color: var(--mobile-text-inverse);
    }
  }
  
  // Mobile cards dark
  .mobile-card {
    background-color: var(--mobile-card-bg);
    box-shadow: var(--mobile-card-shadow);
    border: 1px solid var(--mobile-input-border);
  }
  
  // Mobile lists dark
  .mobile-list-item {
    background-color: var(--mobile-card-bg);
    border-bottom: 1px solid var(--mobile-input-border);
    
    &:hover, &:active {
      background-color: var(--mobile-bg-tertiary);
    }
  }
  
  // Mobile modals and sheets dark
  .mobile-modal-overlay {
    background-color: var(--mobile-bg-overlay);
  }
  
  .mobile-bottom-sheet {
    background-color: var(--mobile-card-bg);
    border-top: 1px solid var(--mobile-input-border);
  }
  
  // Mobile loading states dark
  .mobile-skeleton {
    background: linear-gradient(90deg, #2D2D2D 25%, #404040 50%, #2D2D2D 75%);
    background-size: 200% 100%;
    animation: mobileSkeletonLoadingDark 1.5s infinite;
  }
  
  @keyframes mobileSkeletonLoadingDark {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }
  
  // Dark theme scrollbar
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  
  ::-webkit-scrollbar-track {
    background: var(--mobile-bg-secondary);
  }
  
  ::-webkit-scrollbar-thumb {
    background: var(--mobile-input-border);
    border-radius: 3px;
    
    &:hover {
      background: var(--mobile-text-tertiary);
    }
  }
  
  // Selection styling dark
  ::selection {
    background-color: rgba(var(--mobile-primary), 0.3);
    color: var(--mobile-text-primary);
  }
}

// iOS dark theme specific
.ios {
  [data-theme="dark"] {
    --mobile-bg-primary: #000000;
    --mobile-bg-secondary: #1C1C1E;
    --mobile-card-bg: #1C1C1E;
    --mobile-card-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
  }
}

// Android dark theme specific
.android {
  [data-theme="dark"] {
    --mobile-bg-primary: #121212;
    --mobile-bg-secondary: #1E1E1E;
    --mobile-card-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
  }
}

// Prefers dark color scheme for mobile
@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) {
    @extend [data-theme="dark"];
  }
  
  // Update meta theme-color for PWA
  meta[name="theme-color"] {
    content: var(--theme-color);
  }
}