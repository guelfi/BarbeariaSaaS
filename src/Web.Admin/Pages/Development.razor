@page "/development"
@page "/"
@using BarbeariaSaaS.Web.Admin.Services
@inject AuthStateService AuthState
@inject IAuthService AuthService
@inject NavigationManager Navigation

<PageTitle>Em Desenvolvimento - Barbearia SaaS Admin</PageTitle>

@if (!AuthState.IsAuthenticated)
{
    <div class="loading-container">
        <MudProgressCircular Indeterminate="true" Size="Size.Large" />
        <MudText Typo="Typo.h6" Class="mt-4">Verificando autenticação...</MudText>
    </div>
}
else
{
    <div class="development-container">
        <MudContainer MaxWidth="MaxWidth.Large" Class="py-8">
            
            <!-- Header -->
            <div class="development-header text-center mb-8">
                <MudIcon Icon="@Icons.Material.Filled.Construction" 
                         Size="Size.Large" 
                         Style="font-size: 5rem; color: var(--admin-primary); margin-bottom: 1rem;" />
                
                <MudText Typo="Typo.h3" Class="mb-4" Style="color: var(--admin-text-primary); font-weight: 700;">
                    Sistema em Desenvolvimento
                </MudText>
                
                <MudText Typo="Typo.h6" Style="color: var(--admin-text-secondary); max-width: 600px; margin: 0 auto;">
                    Bem-vindo ao painel administrativo do Barbearia SaaS. 
                    Estamos trabalhando para trazer as melhores funcionalidades para você.
                </MudText>
            </div>

            <!-- User Info Card -->
            <MudCard Class="mb-6" Style="background: linear-gradient(135deg, var(--admin-primary) 0%, #2D1B69 100%);">
                <MudCardContent Class="pa-6">
                    <div class="d-flex align-center">
                        <MudAvatar Size="Size.Large" 
                                   Style="background-color: rgba(255,255,255,0.2); color: white; font-size: 1.5rem;">
                            @AuthState.GetUserInitials()
                        </MudAvatar>
                        <div class="ml-4">
                            <MudText Typo="Typo.h5" Style="color: white; font-weight: 600;">
                                Olá, @AuthState.GetUserDisplayName()!
                            </MudText>
                            <MudText Typo="Typo.body1" Style="color: rgba(255,255,255,0.8);">
                                @AuthState.CurrentUser?.Email
                            </MudText>
                            <MudChip Size="Size.Small" 
                                     Style="background-color: rgba(255,255,255,0.2); color: white; margin-top: 8px;">
                                @AuthState.CurrentUser?.Role
                            </MudChip>
                        </div>
                    </div>
                </MudCardContent>
            </MudCard>

            <!-- Features Roadmap -->
            <MudGrid>
                <MudItem xs="12" md="6">
                    <MudCard Class="development-feature-card">
                        <MudCardContent>
                            <div class="d-flex align-center mb-3">
                                <MudIcon Icon="@Icons.Material.Filled.Business" 
                                         Size="Size.Medium" 
                                         Style="color: var(--tenant-active); margin-right: 12px;" />
                                <MudText Typo="Typo.h6" Style="color: var(--admin-text-primary);">
                                    Gestão de Barbearias
                                </MudText>
                            </div>
                            <MudText Typo="Typo.body2" Style="color: var(--admin-text-secondary);">
                                Cadastro, edição e gerenciamento completo de barbearias (tenants) na plataforma.
                            </MudText>
                            <MudProgressLinear Value="75" Color="Color.Success" Class="mt-3" />
                            <MudText Typo="Typo.caption" Style="color: var(--admin-text-tertiary);" Class="mt-1">
                                75% concluído
                            </MudText>
                        </MudCardContent>
                    </MudCard>
                </MudItem>

                <MudItem xs="12" md="6">
                    <MudCard Class="development-feature-card">
                        <MudCardContent>
                            <div class="d-flex align-center mb-3">
                                <MudIcon Icon="@Icons.Material.Filled.People" 
                                         Size="Size.Medium" 
                                         Style="color: var(--admin-info); margin-right: 12px;" />
                                <MudText Typo="Typo.h6" Style="color: var(--admin-text-primary);">
                                    Gestão de Usuários
                                </MudText>
                            </div>
                            <MudText Typo="Typo.body2" Style="color: var(--admin-text-secondary);">
                                Controle de usuários, permissões e acessos por barbearia.
                            </MudText>
                            <MudProgressLinear Value="60" Color="Color.Info" Class="mt-3" />
                            <MudText Typo="Typo.caption" Style="color: var(--admin-text-tertiary);" Class="mt-1">
                                60% concluído
                            </MudText>
                        </MudCardContent>
                    </MudCard>
                </MudItem>

                <MudItem xs="12" md="6">
                    <MudCard Class="development-feature-card">
                        <MudCardContent>
                            <div class="d-flex align-center mb-3">
                                <MudIcon Icon="@Icons.Material.Filled.Analytics" 
                                         Size="Size.Medium" 
                                         Style="color: var(--admin-warning); margin-right: 12px;" />
                                <MudText Typo="Typo.h6" Style="color: var(--admin-text-primary);">
                                    Analytics e Relatórios
                                </MudText>
                            </div>
                            <MudText Typo="Typo.body2" Style="color: var(--admin-text-secondary);">
                                Dashboard com métricas, gráficos e relatórios detalhados da plataforma.
                            </MudText>
                            <MudProgressLinear Value="40" Color="Color.Warning" Class="mt-3" />
                            <MudText Typo="Typo.caption" Style="color: var(--admin-text-tertiary);" Class="mt-1">
                                40% concluído
                            </MudText>
                        </MudCardContent>
                    </MudCard>
                </MudItem>

                <MudItem xs="12" md="6">
                    <MudCard Class="development-feature-card">
                        <MudCardContent>
                            <div class="d-flex align-center mb-3">
                                <MudIcon Icon="@Icons.Material.Filled.Payment" 
                                         Size="Size.Medium" 
                                         Style="color: var(--revenue-positive); margin-right: 12px;" />
                                <MudText Typo="Typo.h6" Style="color: var(--admin-text-primary);">
                                    Sistema de Faturamento
                                </MudText>
                            </div>
                            <MudText Typo="Typo.body2" Style="color: var(--admin-text-secondary);">
                                Controle de planos, pagamentos e faturamento das barbearias.
                            </MudText>
                            <MudProgressLinear Value="25" Color="Color.Error" Class="mt-3" />
                            <MudText Typo="Typo.caption" Style="color: var(--admin-text-tertiary);" Class="mt-1">
                                25% concluído
                            </MudText>
                        </MudCardContent>
                    </MudCard>
                </MudItem>
            </MudGrid>

            <!-- Action Buttons -->
            <div class="text-center mt-8">
                <MudButton Variant="Variant.Filled" 
                           Color="Color.Primary" 
                           Size="Size.Large"
                           StartIcon="@Icons.Material.Filled.Refresh"
                           Class="mr-4"
                           OnClick="RefreshPage">
                    Atualizar Página
                </MudButton>
                
                <MudButton Variant="Variant.Outlined" 
                           Color="Color.Secondary" 
                           Size="Size.Large"
                           StartIcon="@Icons.Material.Filled.Logout"
                           OnClick="HandleLogout">
                    Sair do Sistema
                </MudButton>
            </div>

            <!-- Footer Info -->
            <div class="text-center mt-8">
                <MudText Typo="Typo.caption" Style="color: var(--admin-text-tertiary);">
                    Versão 1.0.0 - Desenvolvido com ❤️ usando Blazor Server + MudBlazor
                </MudText>
            </div>

        </MudContainer>
    </div>
}

<style>
    .loading-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        background-color: var(--admin-bg-secondary);
    }

    .development-container {
        background-color: var(--admin-bg-secondary);
        min-height: 100vh;
        padding-top: 2rem;
    }

    .development-header {
        animation: fadeInUp 0.8s ease-out;
    }

    .development-feature-card {
        background-color: var(--admin-card-bg) !important;
        border: 1px solid var(--admin-card-border);
        box-shadow: var(--admin-card-shadow) !important;
        border-radius: 12px !important;
        transition: all 0.3s ease !important;
        animation: fadeInUp 0.6s ease-out;
        animation-fill-mode: both;
    }

    .development-feature-card:nth-child(1) { animation-delay: 0.1s; }
    .development-feature-card:nth-child(2) { animation-delay: 0.2s; }
    .development-feature-card:nth-child(3) { animation-delay: 0.3s; }
    .development-feature-card:nth-child(4) { animation-delay: 0.4s; }

    .development-feature-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15) !important;
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .mud-progress-linear {
        border-radius: 4px !important;
        height: 6px !important;
    }

    .mud-button-filled-primary {
        background-color: var(--admin-primary) !important;
        border-radius: 8px !important;
        text-transform: none !important;
        font-weight: 600 !important;
        padding: 12px 24px !important;
    }

    .mud-button-outlined-secondary {
        border-color: var(--admin-text-secondary) !important;
        color: var(--admin-text-secondary) !important;
        border-radius: 8px !important;
        text-transform: none !important;
        font-weight: 600 !important;
        padding: 12px 24px !important;
    }
</style>

@code {
    protected override async Task OnInitializedAsync()
    {
        // Redirect to login if not authenticated
        if (!AuthState.IsAuthenticated)
        {
            Navigation.NavigateTo("/login");
            return;
        }

        // Initialize auth state if needed
        AuthService.InitializeAuthState();
    }

    private void RefreshPage()
    {
        Navigation.NavigateTo("/development", forceLoad: true);
    }

    private async Task HandleLogout()
    {
        await AuthService.LogoutAsync();
        Navigation.NavigateTo("/login");
    }
}